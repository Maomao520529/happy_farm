(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-411f9f85"],{"1dde":function(e,t,c){var r=c("d039"),o=c("b622"),n=c("2d00"),i=o("species");e.exports=function(e){return n>=51||!r((function(){var t=[],c=t.constructor={};return c[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2532:function(e,t,c){"use strict";var r=c("23e7"),o=c("5a34"),n=c("1d80"),i=c("577e"),a=c("ab13");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~i(n(this)).indexOf(i(o(e)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,c){var r=c("861d"),o=c("c6b6"),n=c("b622"),i=n("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},"5a34":function(e,t,c){var r=c("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6df4":function(e,t,c){"use strict";c("cece")},8418:function(e,t,c){"use strict";var r=c("a04b"),o=c("9bf2"),n=c("5c6c");e.exports=function(e,t,c){var i=r(t);i in e?o.f(e,i,n(0,c)):e[i]=c}},"99af":function(e,t,c){"use strict";var r=c("23e7"),o=c("d039"),n=c("e8b5"),i=c("861d"),a=c("7b0b"),s=c("50c4"),l=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),f=c("2d00"),p=b("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",v=f>=51||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=u("concat"),O=function(e){if(!i(e))return!1;var t=e[p];return void 0!==t?!!t:n(e)},j=!v||!g;r({target:"Array",proto:!0,forced:j},{concat:function(e){var t,c,r,o,n,i=a(this),u=d(i,0),b=0;for(t=-1,r=arguments.length;t<r;t++)if(n=-1===t?i:arguments[t],O(n)){if(o=s(n.length),b+o>m)throw TypeError(h);for(c=0;c<o;c++,b++)c in n&&l(u,b,n[c])}else{if(b>=m)throw TypeError(h);l(u,b++,n)}return u.length=b,u}})},a434:function(e,t,c){"use strict";var r=c("23e7"),o=c("23cb"),n=c("a691"),i=c("50c4"),a=c("7b0b"),s=c("65f0"),l=c("8418"),d=c("1dde"),u=d("splice"),b=Math.max,f=Math.min,p=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,r,d,u,h,v,g=a(this),O=i(g.length),j=o(e,O),k=arguments.length;if(0===k?c=r=0:1===k?(c=0,r=O-j):(c=k-2,r=f(b(n(t),0),O-j)),O+c-r>p)throw TypeError(m);for(d=s(g,r),u=0;u<r;u++)h=j+u,h in g&&l(d,u,g[h]);if(d.length=r,c<r){for(u=j;u<O-r;u++)h=u+r,v=u+c,h in g?g[v]=g[h]:delete g[v];for(u=O;u>O-r+c;u--)delete g[u-1]}else if(c>r)for(u=O-r;u>j;u--)h=u+r-1,v=u+c-1,h in g?g[v]=g[h]:delete g[v];for(u=0;u<c;u++)g[u+j]=arguments[u+2];return g.length=O-r+c,d}})},ab13:function(e,t,c){var r=c("b622"),o=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(c){try{return t[o]=!1,"/./"[e](t)}catch(r){}}return!1}},caad:function(e,t,c){"use strict";var r=c("23e7"),o=c("4d64").includes,n=c("44d2");r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},cece:function(e,t,c){},e0c2:function(e,t,c){"use strict";t["a"]={save:function(e){var t=JSON.stringify(e);localStorage.setItem("happyfarmFavorite",t)},get:function(){return JSON.parse(localStorage.getItem("happyfarmFavorite"))}}},f786:function(e,t,c){"use strict";c.r(t);c("caad"),c("2532");var r=c("7a23");Object(r["pushScopeId"])("data-v-98e93e88");var o=Object(r["createElementVNode"])("div",{class:"loading"},[Object(r["createElementVNode"])("span"),Object(r["createElementVNode"])("span"),Object(r["createElementVNode"])("span"),Object(r["createElementVNode"])("span")],-1),n=Object(r["createElementVNode"])("div",{class:"products-banner"},null,-1),i={class:"container pb-6"},a=Object(r["createElementVNode"])("h3",{class:"text-center my-5 text-success"},[Object(r["createElementVNode"])("strong",{"data-aos":"flip-up",class:"border-bottom border-success d-inline-block border-4 pb-4"},"我的最愛")],-1),s=Object(r["createElementVNode"])("i",{class:"bi bi-trash me-2"},null,-1),l=Object(r["createTextVNode"])("刪除所有收藏"),d=[s,l],u={key:1,class:"row mt-3"},b={class:"container-fluid"},f={class:"card box-shadow border-0 text-center h-100 mb-4"},p={class:"card-img"},m={class:"card-footer border-top-0"},h={class:"card-header favorites"},v=["onClick"],g={key:0,class:"i bi-bookmark-heart-fill clickFavorite fs-2 text-atlanticBlue"},O={key:1,class:"i bi-bookmark-heart fs-2 text-atlanticBlue"},j=["onClick"],k=Object(r["createElementVNode"])("i",{class:"fas fa-cookie-bite"},null,-1),y=Object(r["createTextVNode"])(),E=Object(r["createElementVNode"])("span",{class:"ml-2 fs-5"},"產品資訊",-1),x=[k,y,E],N=["onClick"],V=Object(r["createElementVNode"])("i",{class:"bi bi-cart3 fs-4"},null,-1),w=[V],B={class:"card-body"},C={class:"card-title"},L={key:0,class:"h5 fw-bold card-text text-danger fs-5"},F={key:2,class:"d-flex-center flex-column align-items-center mb-3 py-3 shadow-sm"},S=Object(r["createElementVNode"])("p",{class:"text-center"},"收藏清單是空的唷！",-1),T=Object(r["createTextVNode"])("選購農產品");function M(e,t,c,s,l,k){var y=Object(r["resolveComponent"])("Loading"),E=Object(r["resolveComponent"])("router-link");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(y,{active:l.isLoading},{default:Object(r["withCtx"])((function(){return[o]})),_:1},8,["active"]),n,Object(r["createElementVNode"])("div",i,[a,l.favoriteList&&l.favoriteList.length>=2?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,class:"btn btn-outline-danger border-0 d-flex align-items-center mb-3",onClick:t[0]||(t[0]=Object(r["withModifiers"])((function(){return k.deleteAllFavorite&&k.deleteAllFavorite.apply(k,arguments)}),["prevent"]))},d)):Object(r["createCommentVNode"])("",!0),l.favoriteList&&0!==l.favoriteList.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",u,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(l.favoriteList,(function(t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"col-md-4",key:t.id},[Object(r["createElementVNode"])("div",b,[Object(r["createElementVNode"])("div",f,[Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])([{height:"330px","background-size":"cover","background-position":"center","border-radius":"5%"},{backgroundImage:"url(".concat(t.imageUrl,")")}])},null,4)]),Object(r["createElementVNode"])("div",m,[Object(r["createElementVNode"])("div",h,[Object(r["createElementVNode"])("a",{href:"#",onClick:Object(r["withModifiers"])((function(e){return k.removeMyFavorite(t)}),["prevent"])},[l.favorites.includes(t.id)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("i",g)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("i",O))],8,v),Object(r["createElementVNode"])("button",{type:"button",class:"btn btn-many btn-block btn-sm p-2 ml-3 ",onClick:function(e){return k.getProduct(t.id)}},x,8,j),Object(r["createElementVNode"])("button",{type:"button",class:"btn btn-finish btn-block btn-sm p-2 ml-3",onClick:Object(r["withModifiers"])((function(e){return k.addToCart(t.id)}),["prevent"])},w,8,N)])]),Object(r["createElementVNode"])("div",B,[Object(r["createElementVNode"])("h5",C,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(t.title),1)]),Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["h5",[t.price!==t.origin_price?["text-brown-400","text-decoration-line-through"]:"text-dark"]])},"NT. "+Object(r["toDisplayString"])(e.$filters.currency(t.origin_price)),3),t.price!==t.origin_price?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",L,"優惠價 "+Object(r["toDisplayString"])(e.$filters.currency(t.price))+" 元",1)):Object(r["createCommentVNode"])("",!0)])])])])})),128))])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",F,[S,Object(r["createVNode"])(E,{to:"/user/products",class:"btn btn-success px-5 py-3"},{default:Object(r["withCtx"])((function(){return[T]})),_:1})]))])],64)}Object(r["popScopeId"])();c("99af"),c("159b"),c("a434");var _=c("e0c2"),A={data:function(){return{favoriteList:[],isLoading:!1,products:[],favorites:_["a"].get()||[]}},inject:["emitter"],methods:{getProducts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yenying-api","/products/all");this.isLoading=!0,this.$http.get(t).then((function(t){t.data.success&&(e.isLoading=!1,e.products=t.data.products,e.getFavorites())})).catch((function(t){t&&(e.isLoading=!1)}))},getProduct:function(e){this.$router.push("/user/product/".concat(e))},getFavorites:function(){var e=this;this.favoriteList=[],this.favorites.forEach((function(t){e.products.forEach((function(c){c.id===t&&e.favoriteList.push(c)}))}))},removeMyFavorite:function(e){this.favorites.splice(this.favorites.indexOf(e.id),1),_["a"].save(this.favorites),this.emitter.emit("favorite"),this.emitter.emit("push-message",{style:"danger",title:"已取消我的最愛"}),this.getFavorites()},addToCart:function(e){var t=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yenying-api","/cart"),o={product_id:e,qty:c};this.isLoading=!0,this.$http.post(r,{data:o}).then((function(e){t.isLoading=!1,t.emitter.emit("update-cart"),e.data.success&&t.emitter.emit("push-message",{style:"success",title:"加入購物車"}),t.$router.push("/user/cartTable")}))},deleteAllFavorite:function(){this.favorites=[],_["a"].save(this.favorites),this.emitter.emit("favorite"),this.getFavorites()}},mounted:function(){this.getProducts()}},I=(c("6df4"),c("d959")),$=c.n(I);const J=$()(A,[["render",M],["__scopeId","data-v-98e93e88"]]);t["default"]=J}}]);
//# sourceMappingURL=chunk-411f9f85.3f2a0649.js.map