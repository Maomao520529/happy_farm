(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c70b7918"],{"1c38":function(e,t,c){"use strict";c("e41a")},"1dde":function(e,t,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");e.exports=function(e){return o>=51||!n((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},3043:function(e,t,c){"use strict";c.r(t);var n=c("7a23");Object(n["pushScopeId"])("data-v-0df038c9");var a=Object(n["createElementVNode"])("div",{class:"loading"},[Object(n["createElementVNode"])("span"),Object(n["createElementVNode"])("span"),Object(n["createElementVNode"])("span"),Object(n["createElementVNode"])("span")],-1),o=Object(n["createElementVNode"])("div",{class:"cart-banner"},null,-1),r={class:"container my-2"},d=Object(n["createStaticVNode"])('<div class="row  d-flex justify-content-center mb-4" data-v-0df038c9><div class="col-md-4 mb-2 mb-md-4" data-v-0df038c9><div class="step active" data-v-0df038c9>購物車列表</div></div><div class="col-md-4 mb-2 mb-md-4" data-v-0df038c9><div class="step" data-v-0df038c9>確認訂單</div></div><div class="col-md-4 mb-2 mb-md-4" data-v-0df038c9><div class="step" data-v-0df038c9>訂單完成</div></div></div>',1),s={class:"row d-flex justify-content-center"},i={key:0,class:"col-md-12"},l=Object(n["createElementVNode"])("h3",{class:"h3 fw-bold mb-4 mb-md-6"},"購物車",-1),u={class:"table align-middle border"},b=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",{class:"text-center"},[Object(n["createElementVNode"])("th",null,"刪除"),Object(n["createElementVNode"])("th",null,"農產品"),Object(n["createElementVNode"])("th",null,"品名"),Object(n["createElementVNode"])("th",{style:{width:"300px"}},"數量"),Object(n["createElementVNode"])("th",null,"總單價")])],-1),m={class:"text-center"},p=["disabled","onClick"],j=Object(n["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),O=[j],f={class:"text-center"},v=["src"],h={class:"text-center"},N={key:0,class:"text-success"},V={class:"input-group input-group-sm text-center"},g=["disabled","onClick"],y=Object(n["createElementVNode"])("i",{class:"bi bi-dash-lg"},null,-1),E=[y],x=["disabled","onChange","onUpdate:modelValue"],k={class:"input-group-text bg-success bg-opacity-50"},C=["disabled","onClick"],w=Object(n["createElementVNode"])("i",{class:"bi bi-plus-lg"},null,-1),B=[w],_={class:"text-center"},I={key:0,class:"text-success"},T={class:"border"},L=Object(n["createElementVNode"])("td",{colspan:"4",class:"text-end"},"總計",-1),q={class:"text-end"},S={key:0},D=Object(n["createElementVNode"])("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),$={class:"text-end text-success"},Q={class:"input-group mb-3 input-group-sm"},U={class:"input-group-append"},F={class:"text-end"},M=Object(n["createTextVNode"])("繼續購物"),J=Object(n["createTextVNode"])("前往結帳"),A={key:1,class:"container text-center py-7 py-md-9"},z=Object(n["createElementVNode"])("p",null,[Object(n["createTextVNode"])(" 購物車目前尚無商品唷 ! "),Object(n["createElementVNode"])("br"),Object(n["createTextVNode"])(" 歡迎至賣場逛逛 ")],-1),G=Object(n["createTextVNode"])("商品列表");function H(e,t,c,j,y,w){var H=Object(n["resolveComponent"])("Loading"),K=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(H,{active:y.isLoading},{default:Object(n["withCtx"])((function(){return[a]})),_:1},8,["active"]),o,Object(n["createElementVNode"])("div",r,[d,Object(n["createElementVNode"])("div",s,[y.cart.final_total>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[l,Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("table",u,[b,Object(n["createElementVNode"])("tbody",null,[y.cart.carts?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(y.cart.carts,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("td",m,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm mx-4",disabled:y.status.loadingItem===t.id,onClick:function(e){return w.removeCartItem(t.id)}},O,8,p)]),Object(n["createElementVNode"])("td",f,[Object(n["createElementVNode"])("img",{src:t.product.imageUrl,alt:"",class:"img-fluid mb-3"},null,8,v),Object(n["createElementVNode"])("p",null,"NT."+Object(n["toDisplayString"])(t.product.price),1)]),Object(n["createElementVNode"])("td",h,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",N," 已套用優惠券 ")):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-sm minus border border-dark btn-outline-dark",disabled:y.status.loadingItem===t.id,onClick:function(e){t.qty=w.minusQuantity(t.qty),w.updateCart(t)}},E,8,g),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",class:"form-control text-center",min:"1",disabled:y.status.loadingItem===t.id,onChange:function(e){t.qty=w.verifyNumber(t.qty),w.updateCart(t)},"onUpdate:modelValue":function(e){return t.qty=e}},null,40,x),[[n["vModelText"],t.qty,void 0,{number:!0}]]),Object(n["createElementVNode"])("div",k,Object(n["toDisplayString"])(t.product.unit),1),Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-sm add border border-dark btn-outline-dark",disabled:y.status.loadingItem===t.id,onClick:function(e){t.qty=w.addQuantity(t.qty),w.updateCart(t)}},B,8,C)])]),Object(n["createElementVNode"])("td",_,[y.cart.final_total!==y.cart.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("small",I,"折扣價：")):Object(n["createCommentVNode"])("",!0),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.$filters.currency(t.final_total)),1)])])})),128)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("tfoot",T,[Object(n["createElementVNode"])("tr",null,[L,Object(n["createElementVNode"])("td",q,Object(n["toDisplayString"])(e.$filters.currency(y.cart.total)),1)]),y.cart.final_total!==y.cart.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",S,[D,Object(n["createElementVNode"])("td",$,Object(n["toDisplayString"])(e.$filters.currency(y.cart.final_total)),1)])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",Q,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return y.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[n["vModelText"],y.coupon_code]]),Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=function(){return w.addCouponCode&&w.addCouponCode.apply(w,arguments)})}," 套用優惠碼 ")])]),Object(n["createElementVNode"])("div",F,[Object(n["createVNode"])(K,{class:"btn btn-outline-secondary me-4",to:"/user/products"},{default:Object(n["withCtx"])((function(){return[M]})),_:1}),Object(n["createVNode"])(K,{class:"btn btn-warning text-white",to:"/user/CheckoutForm"},{default:Object(n["withCtx"])((function(){return[J]})),_:1})])])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",A,[z,Object(n["createVNode"])(K,{class:"btn btn-success",to:"/user/products"},{default:Object(n["withCtx"])((function(){return[G]})),_:1})]))])])],64)}Object(n["popScopeId"])();c("99af");var K={data:function(){return{isLoading:!1,status:{loadingItem:""},cart:{},coupon_code:""}},inject:["emitter"],methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yenying-api","/cart");this.$http.get(t).then((function(t){t.data.success&&(e.isLoading=!1,e.cart=t.data.data)}))},updateCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yenying-api","/cart/").concat(e.id);this.isLoading=!0,this.status.loadingItem=e.id;var n={product_id:e.product_id,qty:e.qty};this.$http.put(c,{data:n}).then((function(e){e.data.success&&t.emitter.emit("push-message",{style:"success",title:"更新購物車品項"}),console.log(e),t.status.loadingItem="",t.getCart()}))},addQuantity:function(e){return e<20&&e++,e},minusQuantity:function(e){return e>1&&e--,e},verifyNumber:function(e){return e>20&&(e=20),e<1&&(e=1),e},removeCartItem:function(e){var t=this;this.status.loadingItem=e;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yenying-api","/cart/").concat(e);this.isLoading=!0,this.$http.delete(c).then((function(e){e.data.success&&t.emitter.emit("push-message",{style:"danger",title:"移除購物車品項"}),t.status.loadingItem="",t.isLoading=!1,t.emitter.emit("update-cart"),t.getCart()}))},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yenying-api","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:c}).then((function(t){t.data.success&&e.emitter.emit("push-message",{style:"success",title:"已套用優惠券"}),e.getCart(),e.isLoading=!1}))}},mounted:function(){this.getCart()}},P=(c("1c38"),c("d959")),R=c.n(P);const W=R()(K,[["render",H],["__scopeId","data-v-0df038c9"]]);t["default"]=W},8418:function(e,t,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");e.exports=function(e,t,c){var r=n(t);r in e?a.f(e,r,o(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var n=c("23e7"),a=c("d039"),o=c("e8b5"),r=c("861d"),d=c("7b0b"),s=c("50c4"),i=c("8418"),l=c("65f0"),u=c("1dde"),b=c("b622"),m=c("2d00"),p=b("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",f=m>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=u("concat"),h=function(e){if(!r(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)},N=!f||!v;n({target:"Array",proto:!0,forced:N},{concat:function(e){var t,c,n,a,o,r=d(this),u=l(r,0),b=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?r:arguments[t],h(o)){if(a=s(o.length),b+a>j)throw TypeError(O);for(c=0;c<a;c++,b++)c in o&&i(u,b,o[c])}else{if(b>=j)throw TypeError(O);i(u,b++,o)}return u.length=b,u}})},e41a:function(e,t,c){}}]);
//# sourceMappingURL=chunk-c70b7918.fd444303.js.map